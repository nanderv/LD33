<html>
<head>
  <meta charset="UTF-8">
<title>
Boe
</title>
<link rel="shortcut icon" type="image/png" href="favicon.png"/>
<script src= "jquery.js"></script>

<style type="text/css">
#wrap {
   width:100%;
   margin:0 auto;
}
#left_col {
   float:left;
   width:99%;
}
#right_col {
   float:right;
   width:1%;
}
</style>


</head>

<body bgcolor="black">
<div id="wrap">
    <div id="left_col">
        <div Id="out" style='height: 90%; color:white;     font-family: "Courier New", Courier, monospace; overflow-y: scroll;' ></div>
  		<input Id="in" style="width: 100%; color:grey; background-color:black;">
    </div>
    <div id="right_col">
    </div>
</div>
<div id="wrapper">
  <div id="left" height="100%">
  <div id="right">Column 2 (fixed)</div>
  <div id="cleared"></div>
</div>


<script>
stop_time = true
var
script_list = ["words","world_events", "actions","base", "location_handler","npc","reactions", "location","location_hallway_12", "location_hallway_14", "location_center_14","end", "interpret", "tokenize", "real_time","console"]
 function load_js(src) {
      var my_awesome_script = document.createElement('script');
      my_awesome_script.setAttribute('src',src+'.js');
       my_awesome_script.async = false;

      document.head.appendChild(my_awesome_script);
    }
    function unload_js(src){
              $('script[src="' + src + '.js"]').remove();

    }
    $(document).ready(function(){/*do stuff here*/});
    function add_sc(b,i)
    {
          load_js(script_list[i])

      if(i < script_list.length)
        setTimeout(function(){add_sc(b,i+1)},0)
      else
      {
        setTimeout(function(){ enter(map[here]) }, 10);
      }

    }
function add_scripts(b)
{
  add_sc(b,0)
  murderer = b

}
function reset(b)
{
  konsole.print("")
  konsole.print("")
  konsole.print("")
  konsole.print("")
  stop_time = true
  for(var i = 0 ; i < script_list.length ; i++)
    unload_js(script_list[i])
  add_scripts(b)
  return true
}
add_scripts(0)

$(document).keydown(function(e){
   if ( e.which == 9) {
          e.preventDefault();
          var sentence = konsole.input_field.value.split(" ")
          var ac = autocomplete(sentence[sentence.length -1 ])
          
          if (ac != false)
            sentence[sentence.length -1] = ac
          else
            return false
          konsole.input_field.value = ""

          var i = 0
          for (var i = 0; i< sentence.length ; i++)
          {
            if(i != 0)
              konsole.input_field.value += " "
            konsole.input_field.value += sentence[i]
          }
  }
    if(e.which == 38) {
        if(konsole.back < konsole.history.length)
        {
            konsole.back = konsole.back + 1
            konsole.input_field.value = konsole.history[konsole.history.length- konsole.back]
        } else {
            konsole.print("- End of history")
        }
    }
    if(e.which == 40) {
        if(konsole.back > 1)
        {
            konsole.back = konsole.back - 1
            konsole.input_field.value = konsole.history[konsole.history.length- konsole.back]
        } else {
            konsole.print("- Begin of history")
        }
    }
})
$(document).keypress(function (e) {
    if (e.which == 13) {
        if(!konsole.over_ride_func)
        {
        konsole.history[konsole.history.length] = konsole.input_field.value
        konsole.back = 0
        konsole.line_in("- "+konsole.input_field.value)
        konsole.output = false
        var tok = tokenize(konsole.input_field.value)
        if (tok != false)
        {
          var interp = interpret(tok)
          //debug(tok, interp)

          konsole.input_field.value = ""
        }
        
          } else
            konsole.over_ride_func()
            konsole.output = true
    }
    
if(! konsole.output )
            if(interp)
                konsole.print("Action succesful")
            else
                konsole.print("Action failed")

       
})



</script>


</body>

<script>
</script>
</html>